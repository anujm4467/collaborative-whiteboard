<div class="canvas-container">
  <cw-canvas
    [drawOptions]="drawOptions"
    class="canvas-draw"
    [showGuides]="!hideGuides && !cutOpen"
    [broadcast]="service.broadcast$ | async"
    (draw)="service.emit($event)">
  </cw-canvas>

  <cw-canvas
    *ngIf="cutOpen"
    class="canvas-cut"
    [showGuides]="!hideGuides"
    [drawDisabled]="true"
    [broadcast]="service.broadcastHistoryCut$ | async">
  </cw-canvas>
</div>

<br><br>

<cw-tool-group>
  <cw-tool [content]="drawLineTool" title="Draw line">
    <fa-icon [fixedWidth]="true" [icon]="icons.drawLine"></fa-icon>
  </cw-tool>

  <cw-tool title="Undo" (activeChange)="service.undo()">
    <fa-icon [fixedWidth]="true" [icon]="icons.undo"></fa-icon>
  </cw-tool>

  <cw-tool title="Redo" (activeChange)="service.redo()">
    <fa-icon [fixedWidth]="true" [icon]="icons.redo"></fa-icon>
  </cw-tool>

  <cw-tool [content]="cutTool" title="Cut" (activeChange)="cutOpen = $event">
    <fa-icon [fixedWidth]="true" [icon]="icons.cut"></fa-icon>
  </cw-tool>

  <cw-tool title="Undo all" (activeChange)="service.undoAll()">
    <fa-icon [fixedWidth]="true" [icon]="icons.undoAll"></fa-icon>
  </cw-tool>

  <cw-tool title="Redraw" (activeChange)="service.redraw()">
    <fa-icon [fixedWidth]="true" [icon]="icons.redraw"></fa-icon>
  </cw-tool>

  <cw-tool title="Hide guides" [noContentSwitchMode]="true" [(active)]="hideGuides">
    <fa-icon [fixedWidth]="true" [icon]="icons.noGuides"></fa-icon>
  </cw-tool>
</cw-tool-group>

<ng-template #drawLineTool>
  <cw-draw-line
    [(drawOptions)]="drawOptions">
  </cw-draw-line>
</ng-template>

<ng-template #cutTool>
  <cw-cut></cw-cut>
</ng-template>
